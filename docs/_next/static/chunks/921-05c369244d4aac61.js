(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{5921:function(r,e,a){"use strict";a.d(e,{Z:function(){return N}});var n=a(5893),s=a(7294);function t(r,e,a){return e in r?Object.defineProperty(r,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[e]=a,r}var i=function(r){console.error("Invalid state"),console.error(r)};function c(r){if("standard"===r.type||"customEvenRows"===r.type)return!0;var e=r.rowsPerCar;if(0!==e.length){var a=e[0]+1;if(e.some((function(r,e,n){return 0!==e&&r-n[e-1]!==a})))return!1}else i(r);return!0}function o(r,e){var a=e/r.rowsPerCar;Math.floor(a)!==a&&i(r);for(var n=[],s=0;s<a;s++)r.spacings.forEach((function(r){return n.push(r.slice())}));n.length!==e&&i(r);var t=Array.from(Array(e).keys()).filter((function(e){return(e+1)%r.rowsPerCar===0}));return{type:"custom",rowsPerCar:t,carDesign:t.map((function(e){return r.carDesign})),spacings:n}}function l(r,e){var a=o(r,e);return function(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})))),n.forEach((function(e){t(r,e,a[e])}))}return r}({},a,{type:"customEvenRows",rowsPerCar:a.rowsPerCar.length>0?a.rowsPerCar[0]+1:0})}var u=a(606),d=a(4291),p=a(8735);function m(r){var e=(0,s.useState)(!1),a=e[0],t=e[1];return(0,s.useEffect)((function(){t(!0)}),[]),(0,n.jsx)(n.Fragment,{children:a?r.children:null})}var f=a(6132),h=a(7585),g=a.n(h);function y(r){var e=r.finishSetup,a=r.allowRowEdit,t=(0,s.useState)(r.initialRows),i=t[0],c=t[1],o=(0,s.useState)(r.initialCols),l=o[0],u=o[1],d=(0,s.useCallback)((function(r){if(a){var e=Math.floor(Number(r.target.value));e<0||e>100||u(e)}}),[u,a]),p=(0,s.useCallback)((function(r){if(a){var e=Math.floor(Number(r.target.value));e<0||e>100||c(e)}}),[c,a]);return(0,n.jsxs)("main",{children:[(0,n.jsx)("h2",{children:"Train Setup"}),(0,n.jsxs)("p",{children:["If RCDB contradicts the signage in the station, defer to the park.",(0,n.jsx)("br",{}),"e.g. on B&M hypers with staggered seating, use two rows of two seats per car, not one row of four."]}),(0,n.jsxs)("p",{children:["My site does not currently support variable numbers of seats per row.",(0,n.jsx)("br",{}),"If a train has a more esoteric design, please let me know."]}),(0,n.jsx)("p",{className:g().numInputWrap,children:(0,n.jsxs)("label",{children:[(0,n.jsxs)("span",{className:g().wrap,children:[(0,n.jsx)("span",{className:g().first,children:"Rows"})," ",(0,n.jsx)("span",{className:g().second,children:"per Train"})]}),(0,n.jsx)("input",{type:"number",min:0,max:100,value:i,onChange:p,disabled:!a})]})}),(0,n.jsx)("p",{className:g().numInputWrap,children:(0,n.jsxs)("label",{children:[(0,n.jsxs)("span",{className:g().wrap,children:[(0,n.jsx)("span",{className:g().first,children:"Seats"})," ",(0,n.jsx)("span",{className:g().second,children:"per Row"})]}),(0,n.jsx)("input",{type:"number",min:0,max:100,value:l,onChange:d,disabled:!a})]})}),i*l===0?null:(0,n.jsxs)("p",{children:["Just to confirm, each train sits ",i," \xd7 ",l," = ",i*l," people."]}),i*l>50?(0,n.jsx)("p",{className:g().warn,children:"These trains sit over 50 people each. That seems high. Are you sure your numbers are right?"}):null,i*l===0?null:(0,n.jsxs)("section",{children:[(0,n.jsx)("h2",{children:"Standard Templates"}),(0,n.jsx)("ul",{className:g().templateList,children:w.map(x.bind({},e,i,l))}),(0,n.jsx)("h2",{children:"Special Designs"}),(0,n.jsx)("ul",{className:g().templateList,children:v.map(x.bind({},e,i,l))})]})]})}var x=function(r,e,a,s){return s.validator(e,a)?(0,n.jsx)("li",{children:(0,n.jsxs)("button",{onClick:function(){return r(e,a,s.mapping(e,a))},children:[s.layout(a),(0,n.jsx)("br",{}),s.text]})},s.text):null},w=[{validator:function(){return!0},mapping:function(r,e){return{type:"standard",rowsPerCar:1,carDesign:"normal",spacings:[Array.from(Array(e).keys()).map((function(r){return!0}))]}},text:"1 Row Cars",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsx)("div",{className:g().car,children:(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))})})})}},{validator:function(r){return r%2===0},mapping:function(r,e){return{type:"standard",rowsPerCar:2,carDesign:"normal",spacings:[Array.from(Array(e).keys()).map((function(r){return!0})),Array.from(Array(e).keys()).map((function(r){return!0}))]}},text:"2 Row Cars",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsxs)("div",{className:g().car,children:[(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))}),(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))})]})})}},{validator:function(r){return r%3===0},mapping:function(r,e){return{type:"standard",rowsPerCar:3,carDesign:"normal",spacings:[Array.from(Array(e).keys()).map((function(r){return!0})),Array.from(Array(e).keys()).map((function(r){return!0})),Array.from(Array(e).keys()).map((function(r){return!0}))]}},text:"3 Row Cars",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsxs)("div",{className:g().car,children:[(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))}),(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))}),(0,n.jsx)("div",{className:g().row,children:Array.from(Array(r).keys()).map((function(r){return(0,n.jsx)("div",{className:g().seat},r)}))})]})})}}],v=[{validator:function(r,e){return r%2===0&&2===e},mapping:function(r,e){return{type:"standard",rowsPerCar:2,carDesign:"circular",spacings:[[!0,!0],[!0,!0]]}},text:"Spinning",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsxs)("div",{className:"".concat(g().car," ").concat(g().spin),children:[(0,n.jsxs)("div",{className:g().row,children:[(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().seat})]}),(0,n.jsxs)("div",{className:g().row,children:[(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().seat})]})]})})}},{validator:function(r,e){return 4===e},mapping:function(r,e){return{type:"standard",rowsPerCar:1,carDesign:"normal",spacings:[[!0,!0,!1,!0,!0]]}},text:"Wing Seating",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsx)("div",{className:g().car,children:(0,n.jsxs)("div",{className:g().row,children:[(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().gap}),(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().seat})]})})})}},{validator:function(r,e){return r%2===0&&2===e},mapping:function(r,e){return{type:"standard",rowsPerCar:2,carDesign:"normal",spacings:[[!0,!0],[!0,!1,!0]]}},text:"B&M Hyper Staggered",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsxs)("div",{className:g().car,children:[(0,n.jsxs)("div",{className:g().row,children:[(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().seat})]}),(0,n.jsxs)("div",{className:g().row,children:[(0,n.jsx)("div",{className:g().seat}),(0,n.jsx)("div",{className:g().gap}),(0,n.jsx)("div",{className:g().seat})]})]})})}},{validator:function(){return!0},mapping:function(r,e){return{type:"standard",rowsPerCar:1,carDesign:"normal",spacings:[Array.from(Array(e).keys()).map((function(r){return!0}))]}},text:"Custom",layout:function(r){return(0,n.jsx)("div",{className:g().carWrap,children:(0,n.jsx)("div",{className:g().car,style:{fontSize:"150%",padding:"0.75em 1.5em"},children:"?"})})}}],j=a(6934),C=a.n(j);function b(r,e,a){return e in r?Object.defineProperty(r,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[e]=a,r}function k(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})))),n.forEach((function(e){b(r,e,a[e])}))}return r}function N(r){var e,a,t=(0,s.useState)(void 0),d=t[0],h=t[1],x=(0,s.useState)(null!==(e=r.initialRows)&&void 0!==e?e:0),w=x[0],v=x[1],j=(0,s.useState)(null!==(a=r.initialCols)&&void 0!==a?a:0),b=j[0],N=j[1],E=(0,s.useMemo)((function(){return Array.from(Array(w).keys())}),[w]),T=(0,s.useMemo)((function(){return Array.from(Array(b).keys())}),[b]),S=(0,s.useMemo)((function(){return!!d&&function(r,e){if("standard"===r.type)return!0;if(!c(r))return!1;if(0!==r.carDesign.length){if(r.carDesign.some((function(e){return e!==r.carDesign[0]})))return!1}else i(r);if(r.spacings.length===e){var a="number"===typeof r.rowsPerCar?r.rowsPerCar:r.rowsPerCar[0]+1,n=e/a;if(Math.floor(n)!==n||a>r.spacings.length)return i(r),!1;for(var s=0;s<a;s++)for(var t=r.spacings[s],o=0;o<n;o++)if(r.spacings[o*a+s].some((function(r,e){return r!==t[e]})))return!1}else i(r);return!0}(d,w)}),[d,w]),R=(0,s.useMemo)((function(){return d?"custom"===d.type?d.rowsPerCar.length:w/d.rowsPerCar:0}),[d,w]);(0,s.useEffect)((function(){p.Z.rebuild()}),[S]);var W=r.complete,O=(0,s.useCallback)((function(){d&&W(w,b,d.rowsPerCar,d.carDesign,d.spacings)}),[W,d,w,b]),M=(0,s.useCallback)((function(e,a,n){r.allowRowEdit&&(v(e),N(a)),h(n)}),[r.allowRowEdit]),I=(0,s.useCallback)((function(){confirm("Are you sure you want to discard this current train design?")&&h(void 0)}),[]),B=(0,s.useCallback)((function(r){if(void 0!==d)if("Custom"===r.target.value){if("custom"!==d.type){var e=d.rowsPerCar,a="standard"===d.type?o(d,w):k({},d,{type:"custom",rowsPerCar:E.filter((function(r){return(r+1)%e===0}))});h(a)}}else{if(!c(d)&&!confirm("This will overwrite any custom car-lengths and reset all cars to match the first one. Are you sure you want to continue?"))return;switch(d.type){case"standard":var n=Number(r.target.value);h(k({},d,{rowsPerCar:n,spacings:n<=d.rowsPerCar?d.spacings.slice(0,n):d.spacings.concat(Array.from(Array(n-d.rowsPerCar).keys()).map((function(r){return T.map((function(r){return!0}))})))}));break;case"customEvenRows":var s=Number(r.target.value),t=w/d.rowsPerCar;h(k({},d,{rowsPerCar:s,carDesign:R<=t?d.carDesign.slice(0,R):d.carDesign.concat(Array.from(Array(R-t).keys()).map((function(r){return d.carDesign[0]})))}));break;case"custom":var i=Number(r.target.value),l=d.rowsPerCar.length;h(k({},d,{type:"customEvenRows",rowsPerCar:i,carDesign:R<=l?d.carDesign.slice(0,R):d.carDesign.concat(Array.from(Array(R-l).keys()).map((function(r){return d.carDesign[0]})))}));break;default:(0,u.U)(d)}}}),[d,R,w,E,T]),F=(0,s.useCallback)((function(r,e){var a=function(e){var a=e.carDesign;return a.length>=r.length?a.slice(0,r.length):a.concat(Array.from(Array(r.length-a.length).keys()).map((function(r){return a[0]})))};if("custom"!==e.type){if(S&&!confirm("This will result in different cars having different numbers of rows. Are you sure you wish to continue?"))return;var n="standard"===e.type?k({},o(e,w),{rowsPerCar:r}):k({},e,{type:"custom",rowsPerCar:r,carDesign:a(e)});h(n)}else h(k({},e,{rowsPerCar:r,carDesign:a(e)}))}),[w,S]),L=(0,s.useCallback)((function(r){void 0!==d&&F("custom"!==d.type?E.filter((function(e){return(e+1)%d.rowsPerCar===0&&e!==r})):d.rowsPerCar.filter((function(e){return e!==r})),d)}),[d,E,F]),U=(0,s.useCallback)((function(r){void 0!==d&&F("custom"!==d.type?E.filter((function(r){return(r+1)%d.rowsPerCar===0})).concat(r).sort((function(r,e){return r-e})):d.rowsPerCar.concat(r).sort((function(r,e){return r-e})),d)}),[d,E,F]),Z=(0,s.useCallback)((function(r,e){if(void 0!==d){var a=d.spacings.slice();a[r]=e,h(k({},d,{spacings:a}))}}),[d]),z=(0,s.useCallback)((function(r,e){if(void 0!==d){var a=d.spacings[r],n=a.slice(0,e+1).concat(!1).concat(a.slice(e+1));Z(r,n)}}),[d,Z]),G=(0,s.useCallback)((function(r,e){if(void 0!==d){var a=d.spacings[r];if(a[e])console.error("Invalid space");else{var n=a.slice(0,e).concat(a.slice(e+1));Z(r,n)}}}),[d,Z]),K=(0,s.useCallback)((function(r,e){if(void 0!==d)if("standard"===d.type)h(k({},d,{carDesign:r}));else{var a=d.carDesign.slice();a[e]=r,h(k({},d,{carDesign:a}))}}),[d]),X=(0,s.useCallback)((function(r){if(void 0!==d){var e=r.currentTarget.checked;if("custom"!==d.type)switch(d.type){case"standard":if(e)return;h(l(d,w));break;case"customEvenRows":if(!e)return;if(!S&&!confirm("This will reset all cars to match the first one. Are you sure you wish to continue?"))return;h({type:"standard",rowsPerCar:d.rowsPerCar,spacings:d.spacings.slice(0,d.rowsPerCar),carDesign:d.carDesign[0]});break;default:(0,u.U)(d)}else console.error("How did custom train try to change checkbox?")}}),[d,w,S]),q=(0,s.useCallback)((function(){return(0,n.jsx)("div",{className:"seat",style:{backgroundColor:"rgb(128,128,128)",height:"30px",width:"30px",margin:"0 5px",display:"inline-block",verticalAlign:"middle"}})}),[]),H=(0,s.useCallback)((function(r,e){return d&&(0,n.jsx)(A,{r:r,c:e,state:d,removeSpace:G})}),[d,G]),J=(0,s.useCallback)((function(r){return d&&(0,n.jsx)(D,{carNum:r,numCars:R,state:d,setCarType:K,changeToCustom:X})}),[R,d,K,X]),Q=(0,s.useCallback)((function(r,e){return d&&("standard"!==d.type||r<d.rowsPerCar)?(0,n.jsx)("div",{className:C().spaceAdd,style:{display:"inline-block",verticalAlign:"middle"},children:(0,n.jsx)("button",{onClick:function(){return z(r,e)},children:"+"})}):null}),[d,z]),V=(0,s.useCallback)((function(r){return d&&(0,n.jsx)(_,{rowsPerCar:d.rowsPerCar,r:r,mergeRow:L,splitRow:U},r)}),[d,L,U]);return void 0===d?(0,n.jsx)(y,{finishSetup:M,initialRows:w,initialCols:b,allowRowEdit:r.allowRowEdit}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{children:(0,n.jsx)(p.Z,{effect:"solid",backgroundColor:"rgb(64,64,64)"})}),(0,n.jsx)("div",{className:g().side,children:(0,n.jsx)(f.Z,{rows:w,cols:b,rowsPerCar:d.rowsPerCar,carDesign:d.carDesign,spacings:d.spacings,render:q,renderGap:H,renderCarSide:J,renderColGap:Q,renderRowGap:V})}),(0,n.jsx)(P,{state:d,rows:E,setRows:B,reset:I,done:O})]})}function P(r){var e=r.state,a=r.rows,t=r.setRows,i=r.reset,c=r.done,o="custom"!==e.type?a.length/e.rowsPerCar:e.rowsPerCar.length,l=(0,s.useMemo)((function(){return"custom"!==e.type?e.rowsPerCar:e.rowsPerCar.reduce((function(r,e,a,n){return Math.max(r,0===a?e+1:e-n[a-1])}),0)}),[e]);return(0,n.jsxs)("div",{className:"".concat(g().side," ").concat(g().sidebar),children:[(0,n.jsx)("p",{className:g().instruction,children:"Edit the train to match the layout of the ride."}),(0,n.jsx)("p",{children:"Use the circular shape for spinning cars. Otherwise, keep the cars rectangular, regardless of shape."}),(0,n.jsx)("p",{children:"Add spaces between seats (the little +) to represent variations in spacing in real life. If all seats are equally far apart, no need to add spaces."}),(0,n.jsx)("p",{children:"If RCDB contradicts the park, defer to the park."}),(0,n.jsxs)("p",{className:g().instruction,children:["Rows per car: ",(0,n.jsx)("select",{className:g().rowSelector,onChange:t,value:"custom"===e.type?"Custom":e.rowsPerCar,children:a.filter((function(r){return a.length%(r+1)===0})).map((function(r){return(0,n.jsx)("option",{value:r+1,children:r+1},r)})).concat((0,n.jsx)("option",{children:"Custom"},"custom"))}),"custom"!==e.type?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Click between two rows to merge or split cars."]})]}),(0,n.jsx)("p",{children:1===l?"Each row in this train articulates independently.":"This train contains ".concat(1===o?"1 car":"".concat(o," cars"),", each with ").concat("custom"!==e.type?e.rowsPerCar:"a custom number of"," rows.")}),l>3?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:g().warn,children:"This train has more than three rows per car. This is quite unusual, in my experience. Are you sure you set the right settings?"}),(0,n.jsx)("p",{children:"If each row articulates independently, please set 1 row per car."})]}):null,(0,n.jsxs)("p",{className:g().instruction,children:[(0,n.jsx)("button",{className:g().confirmBtn,onClick:c,children:"Confirm \u2705"}),(0,n.jsx)("button",{className:g().confirmBtn,onClick:i,children:"Reset Train \u274c"})]})]})}function _(r){var e=r.rowsPerCar,a=r.r,t=r.mergeRow,i=r.splitRow,c=(0,s.useCallback)((function(){return t(a)}),[a,t]),o=(0,s.useCallback)((function(){return i(a)}),[a,i]),l="number"===typeof e?(a+1)%e===0:-1!==e.indexOf(a);return(0,n.jsx)("tr",{children:(0,n.jsx)("td",{style:{height:"1px"},colSpan:l?1:2,children:(0,n.jsx)("button",{className:"".concat(C().rowBtn," ").concat(l?C().del:C().add),onClick:l?c:o,children:(0,n.jsx)("span",{children:l?"\ud83d\uddd9":"+"})})},l?"del":"add")})}function A(r){var e=r.state,a=r.r,t=r.c,i=r.removeSpace,c=(0,s.useCallback)((function(){return i(a,t)}),[i,a,t]);return(0,n.jsx)("div",{className:C().spaceDel,children:"standard"!==e.type||a<e.rowsPerCar?(0,n.jsx)("button",{onClick:c,children:(0,n.jsx)("span",{children:"\ud83d\uddd9"})}):(0,n.jsx)(n.Fragment,{children:"\u2022"})})}function D(r){var e=r.carNum,a=r.numCars,t=r.state,i=r.setCarType,c=r.changeToCustom,o=(0,s.useCallback)((function(r){return i(r,e)}),[e,i]);return(0,n.jsxs)("div",{className:C().wrap,children:[0===e||"standard"!==t.type?(0,n.jsx)("div",{style:{display:"inline-block",width:"100px"},children:(0,n.jsx)(d.Z,{onChange:o,options:[{label:(0,n.jsx)("div",{"data-tip":"Standard Car",style:{width:"15px",height:"15px",margin:"5px 0",background:"black",fontSize:0,transform:"translateX(-2px)"},children:"Standard Car"}),value:"normal"},{label:(0,n.jsx)("div",{"data-tip":"Spinning Car",style:{width:"15px",height:"15px",margin:"5px",background:"black",fontSize:0,borderRadius:"15px",transform:"translateX(-2px)"},children:"Spinning Car"}),value:"circular"}],name:"selectorCar".concat(e),forcedSelectedIndex:"normal"===("standard"===t.type?t.carDesign:t.carDesign[e])?0:1,backgroundColor:"rgba(230,230,230)",selectedBackgroundColor:"rgba(128,128,128)",fontColor:"black"})}):null,0===e&&a>1?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{marginTop:"5px"},children:(0,n.jsxs)("label",{style:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)("input",{type:"checkbox",checked:"standard"===t.type,onChange:c,disabled:"custom"===t.type,style:{marginRight:"4px"}})," ","custom"===t.type?(0,n.jsxs)("div",{children:[(0,n.jsx)("del",{children:"Same design for all cars"}),(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Not available with custom cars"})]}):(0,n.jsxs)("div",{children:["Same design for all cars",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Applies to seats and car shape"})]})]})})}):null]})}},7585:function(r){r.exports={side:"TrainEditor_side__cJhxs",sidebar:"TrainEditor_sidebar__4P61_",instruction:"TrainEditor_instruction__dce0e",warn:"TrainEditor_warn__Moyyt",templateList:"TrainEditor_templateList__pWr9U",carWrap:"TrainEditor_carWrap__LTX20",car:"TrainEditor_car__Bm1io",spin:"TrainEditor_spin__W8RMR",row:"TrainEditor_row__Wput_",seat:"TrainEditor_seat__UWKxd",gap:"TrainEditor_gap__6_WLv",numInputWrap:"TrainEditor_numInputWrap__LDhcR",wrap:"TrainEditor_wrap__Tba54",first:"TrainEditor_first__KWKO6",second:"TrainEditor_second__BIE3c",rowSelector:"TrainEditor_rowSelector__g4g11",confirmBtn:"TrainEditor_confirmBtn__bQ8F1"}}}]);