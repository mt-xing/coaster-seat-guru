(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{7802:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contribute/newCoaster",function(){return t(5882)}])},5843:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),a=t(4298),s=t(7294),i=t(4040),o=t(4525),c=t.n(o);function u(e){var n=(0,s.useState)(!1),t=n[0],o=n[1],u=(0,s.useCallback)((function(){return o(!0)}),[]);return(0,s.useEffect)((function(){"google"in window&&u()}),[u]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{src:"https://accounts.google.com/gsi/client",onLoad:u,onError:console.error}),t?e.page:(0,r.jsx)("div",{className:c().load,children:(0,r.jsx)(i.SyncLoader,{})})]})}},1952:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),a=t(1664),s=t(9929),i=t(9988),o=t(5606),c=t.n(o);function u(){return(0,r.jsxs)("header",{className:c().header,children:[(0,r.jsx)("h1",{className:c().h1,children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsxs)("a",{className:c().a,children:[(0,r.jsx)("img",{src:"/img/icon.png",alt:"",className:c().img}),s.sG]})})}),(0,r.jsx)("div",{className:c().div,children:(0,r.jsx)(i.Z,{})})]})}},5882:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),s=t(5893),i=t(9008),o=t(7294),c=t(1664),u=t(6673),l=t(1952),d=t(606),h=t(9929),m=t(832),f=t.n(m),g=t(9841),p=t.n(g),x=t(2601),j=t(5843);function v(e,n,t,r,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void t(u)}o.done?n(c):Promise.resolve(c).then(r,a)}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var k=[{name:"Angry 326",park:"Dakotawinds"},{name:"Steel Retaliation",park:"Cedar Tip"},{name:"Z3",park:"Five Banners Magic Hill"},{name:"Mystic Wood",park:"King's Isle"}],_=k[Math.floor(Math.random()*k.length)],y=/http(?:s?):\/\/rcdb.com\/([\d]+)\.htm/;function w(){var e=(0,o.useState)({s:"Unauthenticated"}),n=e[0],t=e[1],r=(0,o.useState)(""),i=r[0],u=r[1],l=(0,o.useState)(""),m=l[0],g=l[1],j=(0,o.useState)(""),k=j[0],w=j[1],N=(0,o.useState)(0),C=N[0],S=N[1],O=(0,o.useState)(0),E=O[0],T=O[1],B=(0,o.useCallback)((function(e){var n=Math.floor(Number(e.target.value));n<0||n>100||T(n)}),[T]),P=(0,o.useCallback)((function(e){var n=Math.floor(Number(e.target.value));n<0||n>100||S(n)}),[S]),D=(0,o.useCallback)((function(e){var n=e.credential;(0,x.W)(n),t({s:"Ready",token:n,submitting:!1})}),[]);(0,o.useEffect)((function(){if("Unauthenticated"===n.s){var e=(0,x.v)();if(null!==e)return void t({s:"Ready",token:e,submitting:!1});google.accounts.id.initialize({client_id:h.Cx,callback:D}),google.accounts.id.renderButton(document.getElementById("gbuttonDiv"),{theme:"outline",size:"large"})}}),[n,D]);var I=(0,o.useCallback)((function(){if("Ready"===n.s&&!n.submitting){var e=y.exec(k);if(null!==e){var r,s=e[1],o=n.token;t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}({},n,{submitting:!0})),(r=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.QP,"CreateCoaster?id=").concat(s),{method:"POST",body:JSON.stringify({token:o,rcdb:k,name:i,park:m,rows:C,cols:E})});case 2:e.sent.ok?t({s:"Done",id:s}):t({s:"Error",msg:"Sorry, an error occurred"});case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var s=r.apply(e,n);function i(e){v(s,t,a,i,o,"next",e)}function o(e){v(s,t,a,i,o,"throw",e)}i(void 0)}))})()}}}),[n,i,m,C,E,k]),R=(0,o.useMemo)((function(){return"Ready"===n.s&&!n.submitting&&(""!==i&&""!==m&&""!==k&&(0!==C&&0!==E&&y.test(k)))}),[n,i,m,C,E,k]),M=(0,o.useCallback)((function(){return location.reload()}),[]);return(0,o.useCallback)((function(){switch(n.s){case"Unauthenticated":return(0,s.jsxs)("div",{className:f().load,children:[(0,s.jsx)("h1",{children:"Sign In"}),(0,s.jsx)("div",{id:"gbuttonDiv",className:f().signInBtn}),(0,s.jsx)("p",{children:"This is my attempt to stop the same person from spamming multiple reviews on the same ride. I don't track anything from your Google account. If you have a better idea for how to do this, suggestions are welcome."})]});case"Ready":return(0,s.jsxs)("main",{className:f().main,children:[(0,s.jsx)("h1",{children:"New Coaster"}),(0,s.jsx)("p",{children:"Thanks for making this site better."}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Coaster Name: ",(0,s.jsx)("input",{type:"text",placeholder:_.name,value:i,onChange:function(e){return u(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Park Name: ",(0,s.jsx)("input",{type:"text",placeholder:_.park,value:m,onChange:function(e){return g(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["RCDB Link: ",(0,s.jsx)("input",{type:"text",placeholder:"https://rcdb.com/???.html",value:k,onChange:function(e){return w(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Rows per Train: ",(0,s.jsx)("input",{type:"number",min:0,max:100,value:C,onChange:P})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Seats per Row: ",(0,s.jsx)("input",{type:"number",min:0,max:100,value:E,onChange:B})]})}),C*E===0?null:(0,s.jsxs)("p",{children:["Just to confirm, each train sits ",C," \xd7 ",E," = ",C*E," people."]}),(0,s.jsx)("p",{children:"My site currently only supports rectangular layouts. If a train has a more esoteric design, please let me know."}),(0,s.jsx)("p",{children:(0,s.jsx)("button",{className:p().bigBtn,disabled:!R,onClick:I,children:"Submit"})})]});case"Done":return(0,s.jsxs)("div",{className:f().load,children:[(0,s.jsx)("h1",{children:"Thank You!"}),(0,s.jsx)(c.default,{href:"/results?id=".concat(n.id),children:(0,s.jsx)("a",{className:p().bigBtn,children:"Go to coaster"})})]});case"Error":return(0,s.jsxs)("div",{className:f().load,children:[(0,s.jsx)("h1",{children:"Something Went Wrong :("}),(0,s.jsx)("h2",{children:n.msg}),(0,s.jsx)("button",{className:p().bigBtn,onClick:M,children:"Try again"})]});default:return(0,d.U)(n)}}),[n,I,M,i,m,C,E,k,B,P,R])()}n.default=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.default,{children:[(0,s.jsxs)("title",{children:["Submit Coaster - ",h.sG]}),(0,s.jsx)("meta",{name:"description",content:"Submit a new coaster"})]}),(0,s.jsx)(l.Z,{}),(0,s.jsx)(j.Z,{page:(0,s.jsx)(w,{})}),(0,s.jsx)(u.Z,{isDark:!1})]})}},2601:function(e,n,t){"use strict";function r(e){var n={time:(new Date).getTime()+18e5,token:e};window.sessionStorage.setItem("oauthToken",JSON.stringify(n))}function a(){var e=window.sessionStorage.getItem("oauthToken");if(null===e)return null;var n=JSON.parse(e);return n.time>(new Date).getTime()?n.token:null}t.d(n,{W:function(){return r},v:function(){return a}})},4525:function(e){e.exports={load:"AuthWrapper_load__E3rg6"}},9841:function(e){e.exports={bigBtn:"BigButton_bigBtn__zurtf"}},5606:function(e){e.exports={header:"Header_header__VYZ3G",img:"Header_img__ndXrS",h1:"Header_h1__Rh9ep",div:"Header_div__ju8k0",a:"Header_a__OpYgW"}},832:function(e){e.exports={main:"NewCoaster_main__6vIxY",load:"NewCoaster_load__hY_7f"}},4298:function(e,n,t){e.exports=t(699)}},function(e){e.O(0,[40,678,774,888,179],(function(){return n=7802,e(e.s=n);var n}));var n=e.O();_N_E=n}]);