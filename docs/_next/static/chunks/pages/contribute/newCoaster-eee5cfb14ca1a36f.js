(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{7802:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contribute/newCoaster",function(){return t(5882)}])},6957:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(6052),s=t.n(a);function i(){return(0,r.jsxs)("div",{className:s().wrap,children:[(0,r.jsx)("h1",{children:"Sign In"}),(0,r.jsx)("div",{id:"gbuttonDiv"}),(0,r.jsx)("p",{children:"This is my attempt to stop the same person from spamming multiple reviews on the same ride. I don't track anything from your Google account. If you have a better idea for how to do this, suggestions are welcome."})]})}},5843:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),a=t(4298),s=t(7294),i=t(4040),o=t(4525),c=t.n(o);function u(e){var n=(0,s.useState)(!1),t=n[0],o=n[1],u=(0,s.useCallback)((function(){return o(!0)}),[]);return(0,s.useEffect)((function(){"google"in window&&u()}),[u]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{src:"https://accounts.google.com/gsi/client",onLoad:u,onError:console.error}),t?e.page:(0,r.jsx)("div",{className:c().load,children:(0,r.jsx)(i.SyncLoader,{})})]})}},6673:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(3952),s=t.n(a);function i(e){return(0,r.jsxs)("footer",{className:e.isDark?"".concat(s().footer," ").concat(s().dark):s().footer,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{children:["A website by ",(0,r.jsx)("a",{href:"https://michaelxing.com",target:"_blank",rel:"noreferrer",children:"Michael Xing"}),", with help from ",(0,r.jsx)("a",{href:"https://reddit.com/r/rollercoasters",target:"_blank",rel:"noreferrer",children:"r/rollercoasters"}),"."]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Roller coaster icon by ",(0,r.jsx)("a",{href:"https://www.flaticon.com/free-icons/roller-coaster",target:"_blank",rel:"noreferrer",children:"Freepik - Flaticon"}),"."]}),(0,r.jsxs)("p",{children:["Proudly open source on ",(0,r.jsx)("a",{href:"https://github.com/mt-xing/coaster-seat-guru",target:"_blank",rel:"noreferrer",children:"GitHub"}),"."]})]})]})}},1952:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),a=t(1664),s=t(9929),i=t(9988),o=t(5606),c=t.n(o);function u(){return(0,r.jsxs)("header",{className:c().header,children:[(0,r.jsx)("h1",{className:c().h1,children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsxs)("a",{className:c().a,children:[(0,r.jsx)("img",{src:"/img/icon.png",alt:"",className:c().img}),s.sG]})})}),(0,r.jsx)("div",{className:c().div,children:(0,r.jsx)(i.Z,{})})]})}},9988:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var r=t(4051),a=t.n(r),s=t(5893),i=t(1664),o=t(7294),c=t(4040),u=t(3253),l=t.n(u),d=t(606),h=t(9929);function f(e,n,t,r,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void t(u)}o.done?n(c):Promise.resolve(c).then(r,a)}function p(){var e=(0,o.useState)(""),n=e[0],t=e[1],r=(0,o.useState)(null),u=r[0],p=r[1],m=(0,o.useState)({s:"hidden"}),x=m[0],g=m[1],j=(0,o.useCallback)(function(){var e,n=(e=a().mark((function e(n){var t,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(null),""!==(t=n.replace(/[\W_]+/g,"").toLowerCase())){e.next=5;break}return g({s:"hidden"}),e.abrupt("return");case 5:return e.next=7,fetch("".concat(h.QP,"Search?q=").concat(t));case 7:if((r=e.sent).ok){e.next=11;break}return g({s:"hidden"}),e.abrupt("return");case 11:return e.next=13,r.json();case 13:s=e.sent,g({s:"displayed",list:s});case 15:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function i(e){f(s,r,a,i,o,"next",e)}function o(e){f(s,r,a,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),[g,p]),v=(0,o.useCallback)((function(){t(""),g({s:"hidden"})}),[]),_=(0,o.useCallback)((function(e){var n=e.target.value;t(n),u&&window.clearTimeout(u),""!==n.replace(/[\W_]+/g,"").toLowerCase()?(g({s:"loading"}),p(window.setTimeout((function(){j(n)}),1e3))):g({s:"hidden"})}),[t,u,p,j]),b=(0,o.useCallback)((function(){var e=(0,s.jsxs)("span",{className:l().prompt,children:["Don't see a coaster? ",(0,s.jsx)(i.default,{href:"/contribute/newCoaster",children:(0,s.jsx)("a",{children:"Add it!"})})]});switch(x.s){case"hidden":return null;case"loading":return(0,s.jsx)("div",{className:l().results,children:(0,s.jsx)("span",{className:l().load,children:(0,s.jsx)(c.SyncLoader,{color:"white",size:5})})});case"displayed":return 0===x.list.length?(0,s.jsxs)("div",{className:l().results,children:[(0,s.jsx)("span",{className:l().noResults,children:"No results found"})," ",e]}):(0,s.jsxs)("div",{className:l().results,children:[(0,s.jsx)("ul",{children:x.list.map((function(e){return(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/results?id=".concat(e.id),children:(0,s.jsxs)("a",{onClick:v,children:[(0,s.jsx)("p",{children:e.name}),(0,s.jsx)("p",{children:e.park})]})})},e.id)}))}),e]});default:return(0,d.U)(x)}}),[x,v]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",placeholder:"Search for a coaster",value:n,onChange:_,className:l().input}),b()]})}},5882:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),s=t(5893),i=t(9008),o=t(7294),c=t(1664),u=t(6673),l=t(1952),d=t(606),h=t(9929),f=t(832),p=t.n(f),m=t(9841),x=t.n(m),g=t(2601),j=t(5843),v=t(6957);function _(e,n,t,r,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void t(u)}o.done?n(c):Promise.resolve(c).then(r,a)}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var k=[{name:"Angry 326",park:"Dakotawinds"},{name:"Steel Retaliation",park:"Cedar Tip"},{name:"Z3",park:"Five Banners Magic Hill"},{name:"Mystic Wood",park:"King's Isle"}],w=k[Math.floor(Math.random()*k.length)],y=/http(?:s?):\/\/rcdb.com\/([\d]+)\.htm/;function C(){var e=(0,o.useState)({s:"Unauthenticated"}),n=e[0],t=e[1],r=(0,o.useState)(""),i=r[0],u=r[1],l=(0,o.useState)(""),f=l[0],m=l[1],j=(0,o.useState)(""),k=j[0],C=j[1],S=(0,o.useState)(0),N=S[0],P=S[1],T=(0,o.useState)(0),R=T[0],E=T[1],O=(0,o.useCallback)((function(e){var n=Math.floor(Number(e.target.value));n<0||n>100||E(n)}),[E]),B=(0,o.useCallback)((function(e){var n=Math.floor(Number(e.target.value));n<0||n>100||P(n)}),[P]),D=(0,o.useCallback)((function(e){var n=e.credential;(0,g.W)(n),t({s:"Ready",token:n,submitting:!1})}),[]);(0,o.useEffect)((function(){if("Unauthenticated"===n.s){var e=(0,g.v)();if(null!==e)return void t({s:"Ready",token:e,submitting:!1});google.accounts.id.initialize({client_id:h.Cx,callback:D}),google.accounts.id.renderButton(document.getElementById("gbuttonDiv"),{theme:"outline",size:"large"})}}),[n,D]);var Z=(0,o.useCallback)((function(){if("Ready"===n.s&&!n.submitting){var e=y.exec(k);if(null!==e){var r,s=e[1],o=n.token;t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}({},n,{submitting:!0})),(r=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.QP,"CreateCoaster?id=").concat(s),{method:"POST",body:JSON.stringify({token:o,rcdb:k,name:i,park:f,rows:N,cols:R})});case 2:e.sent.ok?t({s:"Done",id:s}):t({s:"Error",msg:"Sorry, an error occurred"});case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var s=r.apply(e,n);function i(e){_(s,t,a,i,o,"next",e)}function o(e){_(s,t,a,i,o,"throw",e)}i(void 0)}))})()}}}),[n,i,f,N,R,k]),G=(0,o.useMemo)((function(){return"Ready"===n.s&&!n.submitting&&(""!==i&&""!==f&&""!==k&&(0!==N&&0!==R&&y.test(k)))}),[n,i,f,N,R,k]),F=(0,o.useCallback)((function(){return location.reload()}),[]);return(0,o.useCallback)((function(){switch(n.s){case"Unauthenticated":return(0,s.jsx)(v.Z,{});case"Ready":return(0,s.jsxs)("main",{className:p().main,children:[(0,s.jsx)("h1",{children:"New Coaster"}),(0,s.jsx)("p",{children:"Thanks for making this site better."}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Coaster Name: ",(0,s.jsx)("input",{type:"text",placeholder:w.name,value:i,onChange:function(e){return u(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Park Name: ",(0,s.jsx)("input",{type:"text",placeholder:w.park,value:f,onChange:function(e){return m(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["RCDB Link: ",(0,s.jsx)("input",{type:"text",placeholder:"https://rcdb.com/???.html",value:k,onChange:function(e){return C(e.target.value)}})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Rows per Train: ",(0,s.jsx)("input",{type:"number",min:0,max:100,value:N,onChange:B})]})}),(0,s.jsx)("p",{children:(0,s.jsxs)("label",{children:["Seats per Row: ",(0,s.jsx)("input",{type:"number",min:0,max:100,value:R,onChange:O})]})}),N*R===0?null:(0,s.jsxs)("p",{children:["Just to confirm, each train sits ",N," \xd7 ",R," = ",N*R," people."]}),(0,s.jsx)("p",{children:"My site currently only supports rectangular layouts. If a train has a more esoteric design, please let me know."}),(0,s.jsx)("p",{children:(0,s.jsx)("button",{className:x().bigBtn,disabled:!G,onClick:Z,children:"Submit"})})]});case"Done":return(0,s.jsxs)("div",{className:p().load,children:[(0,s.jsx)("h1",{children:"Thank You!"}),(0,s.jsx)(c.default,{href:"/results?id=".concat(n.id),children:(0,s.jsx)("a",{className:x().bigBtn,children:"Go to coaster"})})]});case"Error":return(0,s.jsxs)("div",{className:p().load,children:[(0,s.jsx)("h1",{children:"Something Went Wrong :("}),(0,s.jsx)("h2",{children:n.msg}),(0,s.jsx)("button",{className:x().bigBtn,onClick:F,children:"Try again"})]});default:return(0,d.U)(n)}}),[n,Z,F,i,f,N,R,k,O,B,G])()}n.default=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.default,{children:[(0,s.jsxs)("title",{children:["Submit Coaster - ",h.sG]}),(0,s.jsx)("meta",{name:"description",content:"Submit a new coaster"})]}),(0,s.jsx)(l.Z,{}),(0,s.jsx)(j.Z,{page:(0,s.jsx)(C,{})}),(0,s.jsx)(u.Z,{isDark:!1})]})}},606:function(e,n,t){"use strict";function r(e){throw new Error("Reached unreachable statement ".concat(e))}t.d(n,{U:function(){return r}})},2601:function(e,n,t){"use strict";function r(e){var n={time:(new Date).getTime()+18e5,token:e};window.sessionStorage.setItem("oauthToken",JSON.stringify(n))}function a(){var e=window.sessionStorage.getItem("oauthToken");if(null===e)return null;var n=JSON.parse(e);return n.time>(new Date).getTime()?n.token:null}t.d(n,{W:function(){return r},v:function(){return a}})},9929:function(e,n,t){"use strict";t.d(n,{sG:function(){return r},QP:function(){return a},Cx:function(){return s}});var r="Coaster Seat Guru",a="https://coasterseatguru.azurewebsites.net/api/",s="707815788715-v292qtutlmval10742tekpbnv2a6to6l.apps.googleusercontent.com"},6052:function(e){e.exports={wrap:"AuthBlocker_wrap__22_Bh"}},4525:function(e){e.exports={load:"AuthWrapper_load__E3rg6"}},9841:function(e){e.exports={bigBtn:"BigButton_bigBtn__zurtf"}},3952:function(e){e.exports={footer:"Footer_footer__Tl1eP",dark:"Footer_dark__YTV09"}},5606:function(e){e.exports={header:"Header_header__VYZ3G",img:"Header_img__ndXrS",h1:"Header_h1__Rh9ep",div:"Header_div__ju8k0",a:"Header_a__OpYgW"}},832:function(e){e.exports={main:"NewCoaster_main__6vIxY",load:"NewCoaster_load__hY_7f"}},3253:function(e){e.exports={input:"Search_input__jBVVm",results:"Search_results__5GAEo",noResults:"Search_noResults__RG_yA",load:"Search_load__7D_zK",none:"Search_none__strFj",prompt:"Search_prompt__Xe5Gh"}},4298:function(e,n,t){e.exports=t(699)}},function(e){e.O(0,[828,774,888,179],(function(){return n=7802,e(e.s=n);var n}));var n=e.O();_N_E=n}]);