(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{5419:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return n(1323)}])},1323:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(4051),a=n.n(r),s=n(5893),c=n(9008),o=n(7294),i=n(4040),u=n(1664),l=n(1163),d=n(6673),f=n(1952),h=n(606),x=n(9929),m=n(5913),p=n.n(m),g=n(9841),j=n.n(g),b=n(6132);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=6,r=0;t.forEach((function(t){t.forEach((function(t){var a=Math.abs(e.weightedScore(t));a>n&&(n=a);var s=t.reduce((function(e,t){return e+t}));s>r&&(r=s)}))})),this.maxMagnitude=n,this.maxVotes=r}var t,n,r;return t=e,r=[{key:"weightedScore",value:function(e){return 3*e[0]+e[1]-3*e[2]}}],(n=[{key:"colorOfScore",value:function(t){if(0===this.maxVotes)return"rgb(128, 128, 128)";var n=Math.min(t[0],t[2])/(this.maxVotes/2),r=Math.floor(128*n),a=[128+r,128+r,128-r],s=e.weightedScore(t),c=s>=0?[0,256,0]:[256,0,0],o=Math.abs(s/this.maxMagnitude),i=a.map((function(e,t){return(1-o)*e+o*c[t]})).map((function(e){return e>255?255:e}));return"rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")")}},{key:"maximumVotes",get:function(){return this.maxVotes}}])&&v(t.prototype,n),r&&v(t,r),e}();function y(e,t,n,r,a,s,c){try{var o=e[s](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,a)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function C(){var e=(0,o.useState)({s:"Loading"}),t=e[0],n=e[1],r=(0,o.useCallback)((function(e,r){"Ready"===t.s&&n(_({},t,{selected:{row:e,col:r}}))}),[t]),c=(0,o.useCallback)((function(){window.document.title="N/A - ".concat(x.sG),n({s:"Not Found"})}),[]),d=(0,l.useRouter)(),f=d.query.id,m=d.isReady;(0,o.useEffect)((function(){if(m)if(void 0===f||Array.isArray(f))c();else{var e=function(){var e,t=(e=a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x.QP,"getCoaster?id=").concat(f));case 2:if((t=e.sent).ok){e.next=6;break}return c(),e.abrupt("return");case 6:return e.next=8,t.json();case 8:r=e.sent,window.document.title="".concat(r.name," Seat Map - ").concat(x.sG),n(_({s:"Ready"},r,{selected:null,heatmap:new w(r.data)}));case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function c(e){y(s,r,a,c,o,"next",e)}function o(e){y(s,r,a,c,o,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}}),[c,f,m]);var g=(0,o.useCallback)((function(e){if("Ready"!==e.s)return null;if(null===e.selected)return null;var t=e.selected.row,n=e.selected.col,r=e.data[t][n],a=r.reduce((function(e,t){return e+t})),c=r.reduce((function(e,t){return t>e?t:e})),o=e.total-a;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h2",{children:["Row ",t+1," \u2014 Seat ",n+1]}),(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[[["Love","#2E7D32"],["Like","#0277BD"],["Hate","#C62828"]].map((function(t,n){var o=r[n];return(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:t[0]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{style:{width:"".concat(0===c?0:o/e.heatmap.maximumVotes*100/2,"%"),backgroundColor:t[1]}}),"".concat(0===c?0:Math.round(o/a*100),"% (").concat(o,")")]})]},t[0])})),(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:2,children:[o," ",1===o?"user":"users"," had no opinion"]})})]})})]})}),[]),v=(0,o.useCallback)((function(){return(0,s.jsx)("div",{className:"seat",style:{height:"30px",width:"30px",margin:"0 5px",display:"inline-block",verticalAlign:"middle"}})}),[]);return(0,o.useCallback)((function(){switch(t.s){case"Loading":return(0,s.jsx)("div",{className:p().load,children:(0,s.jsx)(i.SyncLoader,{})});case"Not Found":return(0,s.jsxs)("div",{className:p().load,children:[(0,s.jsx)("h1",{style:{marginBottom:"20px"},children:"Coaster Not Found :("}),(0,s.jsx)("p",{children:"Like Six Flags' corporate strategy, this coaster doesn't seem to exist."}),(0,s.jsx)(u.default,{href:"/contribute/newCoaster",children:(0,s.jsx)("a",{className:j().bigBtn,children:"Why not add it?"})})]});case"Ready":if(void 0===f||Array.isArray(f))throw new Error;return(0,s.jsxs)("main",{className:p().main,children:[(0,s.jsx)("h1",{children:t.name}),(0,s.jsx)("h2",{children:t.park}),(0,s.jsx)(b.Z,{rows:t.rows,cols:t.cols,render:function(e,n){return(0,s.jsx)("button",{style:{backgroundColor:t.heatmap.colorOfScore(t.data[e][n]),margin:"0 5px"},onClick:function(){return r(e,n)}})},renderGap:v,carDesign:t.carDesign,spacings:t.spacings,rowsPerCar:t.rowsPerCar}),(0,s.jsxs)("section",{className:p().details,children:[null===t.selected?(0,s.jsx)("h2",{children:"Select a seat to see ratings"}):g(t),(0,s.jsxs)("p",{className:p().contactMsg,children:["If something is wrong with this page,",(0,s.jsx)("br",{}),"please let me know on ",(0,s.jsx)("a",{href:"https://github.com/mt-xing/coaster-seat-guru/issues",children:"GitHub"}),"."]}),(0,s.jsx)(u.default,{href:"/contribute?id=".concat(f),children:(0,s.jsx)("a",{className:"".concat(j().bigBtn," ").concat(p().voteBtn),children:"Vote on your favorite seats"})}),t.carDesign&&t.spacings&&t.rowsPerCar?null:(0,s.jsxs)("p",{children:["This coaster is missing train data :(",(0,s.jsx)("br",{}),(0,s.jsx)(u.default,{href:"/contribute/coasterTrain?id=".concat(f),children:(0,s.jsx)("a",{className:"".concat(j().bigBtn," ").concat(p().voteBtn),children:"Would you like to add it?"})})]})]})]});default:return(0,h.U)(t)}}),[f,t,r,g,v])()}var N=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.default,{children:[(0,s.jsxs)("title",{children:["Seat Map - ",x.sG]}),(0,s.jsx)("meta",{name:"description",content:"Coaster seat map"})]}),(0,s.jsx)(f.Z,{}),(0,s.jsx)(C,{}),(0,s.jsx)(d.Z,{isDark:!1})]})}},5913:function(e){e.exports={main:"Results_main__i9e5E",load:"Results_load__Yj84G",details:"Results_details__73WFo",voteBtn:"Results_voteBtn__t8c6k",contactMsg:"Results_contactMsg__fgbFv"}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[828,112,774,888,179],(function(){return t=5419,e(e.s=t);var t}));var t=e.O();_N_E=t}]);